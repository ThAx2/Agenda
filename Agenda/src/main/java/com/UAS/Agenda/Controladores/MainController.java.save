package Controladores;
import javafx.fxml.FXML;
cimport javafx.fxml.FXMLLoader;
import javafx.scene.control.TextFormatter; 
import javafx.stage.Stage;
import java.util.function.UnaryOperator; 
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Hyperlink;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import java.io.IOException;

public class MainController {
    @FXML
    private Hyperlink LabelRegistrar;
    @FXML
    private Button myButton;
    @FXML
    private TextField numeroCuentaField;
    @FXML
    private PasswordField pinField;
    @FXML
    public void initialize() {
    		UnaryOperator<TextFormatter.Change> filterCuenta = change -> {
            String newText = change.getControlNewText();
            if (newText.matches("\\d{0,8}")) { 
                return change;
            }
            return null;
        };
        
        	UnaryOperator<TextFormatter.Change> filterPin = change -> {
            String newText = change.getControlNewText();
            if (newText.matches("\\d{0,6}")) {
                return change;
            }
            return null;
        };
        TextFormatter<String> cuentaFormatter = new TextFormatter<>(filterCuenta);
        numeroCuentaField.setTextFormatter(cuentaFormatter);
        
        TextFormatter<String> pinFormatter = new TextFormatter<>(filterPin);
        pinField.setTextFormatter(pinFormatter);
        LabelRegistrar.setOnAction(event -> {
            try {
                Parent root = FXMLLoader.load(getClass().getResource("/registro.fxml"));
                Stage stage = new Stage();
                stage.setScene(new Scene(root));
                stage.setTitle("Formulario de Registro");
                stage.show();
                ((Stage) LabelRegistrar.getScene().getWindow()).close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        });
        String cuenta = numeroCuentaField.getText();
        String pin = pinField.getText();
    }
    @FXML
    private void onButtonClick() {
        String cuenta = numeroCuentaField.getText();
        String pin = pinField.getText();
        
        System.out.println("Login Intentado - Cuenta: " + cuenta + ", PIN: " + pin);
        if (cuenta.equals("123") && pin.equals("456")) {
        try {
            Parent root = FXMLLoader.load(getClass().getResource("/Panel.fxml"));
            Stage stage = new Stage();
            stage.setScene(new Scene(root));
            stage.setTitle("Panel");
            stage.show();
            ((Stage) LabelRegistrar.getScene().getWindow()).close();
        } catch (IOException e) {
            e.printStackTrace();
        	}
        }
    }
}	package Controladores;
	
	import java.io.IOException;
	import javafx.fxml.FXML;
	import javafx.fxml.FXMLLoader;
	import javafx.scene.Parent;
	import javafx.scene.Scene;
	import javafx.scene.control.Button;
	import javafx.scene.control.Label;
	import javafx.scene.control.TextField;
	import javafx.stage.Stage;
	
	public class MainController {
	
	    @FXML
	    private Label myLabel;
	    @FXML
	    private Button myButton;
	    @FXML
	    private TextField numeroCuentaField;
	    @FXML
	    private TextField pinField;
	
	    @FXML
	    private void onButtonClick() {
	        String cuenta = numeroCuentaField.getText();
	        String pin = pinField.getText();
	
	        myLabel.setText("Verificando credenciales...");
	
	        // Simulación de autenticación
	        if (cuenta.equals("123") && pin.equals("456")) {
	            myLabel.setText("Acceso concedido. Cargando panel...");
	            cambiarEscena("/Panel.fxml", "Panel Principal");
	        } else {
	            myLabel.setText("Credenciales incorrectas.");
	        }
	    }
	
	    private void cambiarEscena(String fxmlPath, String title) {
	        try {
	            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlPath));
	            Parent root = loader.load();
	
	            // Obtener la ventana actual
	            Stage stage = (Stage) myButton.getScene().getWindow();
	
	            Scene scene = new Scene(root);
	            stage.setScene(scene);
	            stage.setTitle(title);
	            stage.sizeToScene(); // Ajusta al tamaño del nuevo FXML
	            stage.centerOnScreen();
	            stage.show();
	
	        } catch (IOException e) {
	            System.err.println("Error al cargar FXML: " + fxmlPath);
	            e.printStackTrace();
	            myLabel.setText("Error al cargar la vista: " + e.getMessage());
	        }
	    }
	}
